now musts:
- selection in QTable still doesn't work after sort operations
- illegal use of Qt::UserRole and no Qt::DisplayRole to show elements, must
  be Qt::DisplayRole for all normal data, Qt::UserRole for hidden id only
  (if that option is choosen)
  
bugs:
- QLabel: id is not part of the state (see category_add with recipe.id)
- viewport in QTableWidget doesn't show currently selected item
- non-existing dataslots get triggered without warning:
  reload triggered of "QTreeWidget" "required_components" on dataslot "add_component_required" 
- state of toolbars (enabled/disabled) is not stored into the settings
  and restored from them
- answer: can't ignore subtrees with a question mark on a higher
  level element, would be nice
- sort order is not part of state in table, tree and list widget
- table[] { x:0; y:0; z:0 } crashes with !isEmpty
  at DataTreeSerialize.cpp:212
  212 if (rt.back().type() == DataSerializeItem::OpenTag && ni >= stk.back().tree->size())
  dito with ? instead of 0, so we can't fake an empty element in a list
- we can have multiple selection boxes for the same edit window with
  lost link behaviour, leads also to error message:
  CRITICAL: error widget visitor "QLabel" "component_edit.manufacturer" ambiguus widget link reference : "component_edit:1281_manufacturer" 
- seen races between closing of windows (when clicking very fast,
  hard to reproduce)
- extremly funny messages, aren't '?' values default values there
  to substitute the value, if the property doesn't exist:  
  CRITICAL: element not initialized in answer: "image" at "/picture" 
  CRITICAL: accessing non existing property "main.image.size:?" 
  CRITICAL: accessing non existing property "main.tags.item.id:?" 
  CRITICAL: accessing non existing property "main.image.size:?" 
  CRITICAL: accessing non existing property "main.image.size:?" 
- hard to understand for a developer to put certain dynamic properties
  to widget to avoid error messages like:
  CRITICAL: set a dynamic property of QLabel "picture_info_form.image" that is not predefined: "base64" QVariant(QString, "/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAPAAA/+4ADkFk...") 
  CRITICAL: ERROR:  "-add:266" "REQUEST error in transaction addPicture: invalid input syntax for integer: "" LINE 1: ...NSERT INTO PictureTag( pictureID, tagID ) VALUES( '79', '' )                                                                    ^" 
  CRITICAL: ERROR:  "-save:326" "REQUEST error in transaction updatePicture: invalid input syntax for integer: "" LINE 1: ...NSERT INTO PictureTag( pictureID, tagID ) VALUES( '80', '' )                                             
- state:enabled is ignored if there is a 'form' dyn. property (or better put: the
  form condition takes precedence over the explicit state condition)
  example configuration_add, recipe is mandatory:
  widget "add" not set to Enabled because condition "main.recipe.id" is not met (condition not valid:  QVariant(QString, "") > QVariant(QString, "0") ) 
widget "add" set to enabled (all conditions met) 
widget "add" set to enabled (all conditions met) 
widget "add" set to enabled (all conditions met) 
widget "add" set to enabled (all conditions met) 
widget "pushButton" set to enabled (all conditions met) 

- syntax error: code {?}; leads to completly misleading error message:
  CRITICAL: attribute not defined in answer description: "id" at ""

later (cleanups):
- QTreeWidget:
  - width of columns are adapted when data changes, this is not always
    what you want (see category_edit feature associations)
- better syntax and model for
  - selected_min, select_id:
    - selected.id, selected.<property>, can't access properties for	!!
      the selected row/item. better would be a syntax like
      widget.selected_row.id, widget.selected_row.id.minQuantity, etc.
- readd status indicator (hourglass cursor)
- how things are coupled in two multiple request cases:
  'answer' should fit to 'action'
  'action:select_picture' to 'answer:select_picture'
- status handling (ABa)
  - QTableWidget: state contains the manually changed rulers in the header
    (for column size), not kept
  - show a '*' edited/modified in window title
  - make window.title a widget path for setting the name of the edited
    object (MDI standard)
  - storing of the current state (data) should be optional and only
    enabled if there is a dynamic boolean property on the window 'storeState'
  - ask the user whether he wants to logout with windows in state
    modified/edited
- recheck dynamic i18n support
- serverskeleton, write server session of server data, derive from
  this class, add sessions for qtclient
- libqtwolframeclient cleanup
- libraries for request construction and answer interpretation
  - the one using visitors
- plugins using visitors, how to respect plugin interface there?
- CRITICAL: element not defined in answer description: QVariant(QString, "picture") at "" 
  => add the name of the affected widget here!
- received line: "@
  CRITICAL: "protocol error. ANSWER/ERR/BYE expected, got: @" 
 => happens if -D DATA is given to wolframd
  received line: "PT·Server is shutting down. :P" 
  CRITICAL: "protocol error. ANSWER/ERR/BYE expected, got: PT·SERVER" 

unsorted or maybe obsolete from here:

musts:
- multi-line plain text fields (like desription in recipe) loose newlines
- ILLEGAL STATE 4 in dataAvailable!
- MDI interface
  - open forms via click on button
  - close forms on click on button
  - reload forms from other forms
  - some wiring trouble in datahandler:
    CRITICAL: ERROR: answer for unknown request of doctype "xxx": most likely the
    formwidgets share the same datahandler and the signals are missed, its list and hierarchy
    requests, so it's the domain filler.
    It happens only if the same form is picked as already shown in another window
    => happens also with only one window?!
  - resizing issues: example view picture when picture list window is quite small
- modal dialogs
  - improve now refresh of parent form after closing the modal dialog,
    otherwise state propagation in the UI gets far too complicated!
  - reload has anomalies, initAction/doctype on form are execute after
    the state reset. Order must be clear - reset - initAction - state restore
- file UI and data mode
  - resizing issues
- multi-language support
  - language switch in MDI case (not only m_formWidget!)
  - window names and form widget titles must be translated dynamically
- integrate from qWolfClient
  - help system, context sensitive help, HTMLish
- configurator specific:
  - use simpleforms instead of funny lua parsers (example
    picture parsers)
  - redo, use inheritance in forms
  - rewrite categories, so that joins to pictures, requires/provides, tags,
    etc. are possible through the lua layer
  - linking of categories and features
- FormChooseDialog
  - titles of windows instead of filenames of forms
  - structure? icons? menu?
  - the FormChooserList needs localized titles of all possible forms
    (maybe custom menus which would be added would be better? or a
    tree view in the dialog and a tree menu in the menubar?)
- ask for restart of the client when changing to developer mode
- search with flag (with children)
- delete needs manual set parameters, update and add use XML from widgets,
  slightly assymetrical maybe?
- tags picked from a list and added (needs events)
- optimal size on qtreewidget to fit items (needed for linking categories
  and features linking view)
- tabbed preferences dialog, like thunderbird (in security, form management,
  etc.)
- show pictures in tree view
- scroll to selected element in a single-selection list
- push button state (disabled/enabled) based on a
  condition like {picture.id>0}
- get sensible error message from business layer, not "lua call failed"
  - e.g. avoid deletion of in-use-pictures
  - better even: provide conditions for buttons, so they can't be
    pressed (button.state={something})
- improve group_concat to take a parameter as separator
- allow grouping into tags without a dummy groupbox or
  similar widget around it, where to put the data then?
- how to comminicate tags which are used by picture and 
  they should not be deletable?
- QTableWidget
  - implement other selection modes (column, cells)
  - remember states like column width, etc.
- QDialog instead of QWidget for forms
  - would allow to have default Enter and ESC behaviour
  - must be treated specially, as the form should NOT
    replace the UI currently being shown
- save global state to settings and read it from there
  - global.XXX variables
- unselect trees
- element operations
  - reorganize tree
    - move elements/subtrees
- protocol
  - network loader via protocol or use client library?
- custom widgets for designer
  - picture viewer
    - show 0 to N pictures, scrollable
    - alternative to QTableWidget approach
- localize data:
  - lists and trees need id and translations.
  - where to store the translations? server side, same as domains,
    maybe language attributes for now and separated translations later?
  - classes to map from/to:
    - QListWidget
      - localization
      - form init doesn't work when language is not en_US
    - QTreeWidget
      - localization
      - keep state of
        - sorting order of columns
        - header width
      - expandAll on load
      - open and make an item visible (for instance the location of the
        last add)
- for completion and presentation of big data
  - QListView: with model for big data, on request
  - QTreeView: with model for big data, on request

nice to do:
- file download, later, for reports, PDFs, etc.
  - PDF widget poppler qt4 for previews
- designer mode
  - call designer, linguist, lupdate and lrelease as external processes
  - have a spooler to delegate editing of ui, ts, qss, data to external processes
    - multiple repositores, move objects between them
    - sqlite storage
    - configuration dialog
    - http://www.vision.ee.ethz.ch/computing/sepp-irix/qt-3.0-mo/designer-manual-6.html
- add a data handler
- completion
  - combobox with linedit combined search
  - lists? trees?
- validators
  - add dynamic property for a series of validators like
    - mandatory/optional
    - integer range
    - regex
- tooltips
- how to handle domain enums with internal and presentation
  (e.g. combobox, selection)
- representation of lists of variable size, e.g. list of
  phone numbers
- states (enable/disabled, read/write or read/only) can depend
  on states of other widgets, best example is a checked group
  box for a bunch of settings, see preferences dialog)
- add authentication dialog
- action/form switchForm:
  - need a small state machine for handling the sequence [{action}] <form>
    correctly with error handling
  - as with state machines we would have a "go back wherever you came from"
- most likely not the idea
  - 1:n relations (pick a foreign reference to another
    object), domains (e.g. pick a city in a list of possibilities)
  - grid views
- check how to implement "check for updates" and actually do the update.
  Example: https://github.com/pypt/fervor
  Check also how to get around MSI problems


